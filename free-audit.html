<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Free AI Business Audit — AiGentsy</title>

  <!-- Open Graph -->
  <meta property="og:title" content="Free AI Business Audit — AiGentsy" />
  <meta property="og:description" content="Discover untapped opportunities in your business — powered by AI analysis. Get your free audit in minutes." />
  <meta property="og:image" content="/aigentsy-logo-ultraclean.png" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://aigentsy.com/free-audit.html" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Free AI Business Audit — AiGentsy" />
  <meta name="twitter:description" content="Discover untapped opportunities in your business — powered by AI analysis." />
  <meta name="twitter:image" content="/aigentsy-logo-ultraclean.png" />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />

  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Inter', sans-serif;
      background: radial-gradient(circle at center, #0e101a, #000);
      color: #fff;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    /* ---------- fadeIn keyframe ---------- */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(18px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* ---------- layout ---------- */
    .page-wrapper {
      max-width: 600px;
      width: 100%;
      padding: 48px 20px 64px;
      animation: fadeIn 0.9s ease-out both;
    }

    /* ---------- header ---------- */
    .header {
      text-align: center;
      margin-bottom: 36px;
    }

    .logo {
      display: block;
      margin: 0 auto 20px;
      max-width: 160px;
      background: transparent;
    }

    .header h1 {
      font-size: 2.2rem;
      font-weight: 700;
      color: #fff;
      margin-bottom: 12px;
      line-height: 1.2;
    }

    .header h1 span {
      color: #00bfff;
    }

    .header p {
      font-size: 1.05rem;
      color: #999;
      line-height: 1.6;
      max-width: 480px;
      margin: 0 auto;
    }

    /* ---------- card ---------- */
    .audit-card {
      background: #0d0d0d;
      border: 1px solid #222;
      border-radius: 12px;
      padding: 28px;
      animation: fadeIn 1.1s ease-out both;
    }

    /* ---------- form ---------- */
    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      font-size: 0.85rem;
      font-weight: 500;
      color: #aaa;
      margin-bottom: 6px;
    }

    .form-group label .optional {
      color: #555;
      font-weight: 400;
    }

    .form-group input,
    .form-group textarea {
      width: 100%;
      padding: 12px;
      border-radius: 6px;
      border: 1px solid #333;
      background: #111;
      color: #fff;
      font-family: 'Inter', sans-serif;
      font-size: 0.95rem;
      outline: none;
      transition: border-color 0.25s;
    }

    .form-group input::placeholder,
    .form-group textarea::placeholder {
      color: #555;
    }

    .form-group input:focus,
    .form-group textarea:focus {
      border-color: #00bfff;
    }

    .form-group textarea {
      resize: vertical;
      min-height: 100px;
    }

    /* ---------- submit button ---------- */
    .submit-btn {
      width: 100%;
      padding: 14px;
      border: none;
      border-radius: 8px;
      background: #00bfff;
      color: #000;
      font-family: 'Inter', sans-serif;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: opacity 0.25s, transform 0.15s;
      margin-top: 4px;
    }

    .submit-btn:hover {
      opacity: 0.88;
      transform: translateY(-1px);
    }

    .submit-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    /* ---------- status messages ---------- */
    .status-msg {
      margin-top: 20px;
      text-align: center;
      font-size: 0.95rem;
      line-height: 1.5;
      animation: fadeIn 0.5s ease-out both;
    }

    .status-msg.success {
      color: #00ff88;
    }

    .status-msg.error {
      color: #ff4466;
    }

    /* ---------- footer ---------- */
    .footer {
      text-align: center;
      margin-top: 32px;
      font-size: 0.78rem;
      color: #444;
    }

    .footer a {
      color: #00bfff;
      text-decoration: none;
    }

    .footer a:hover {
      text-decoration: underline;
    }

    /* ---------- responsive ---------- */
    @media (max-width: 480px) {
      .header h1 { font-size: 1.6rem; }
      .audit-card { padding: 20px; }
      .page-wrapper { padding: 32px 16px 48px; }
    }
  </style>
</head>
<body>

  <div class="page-wrapper">

    <!-- Header -->
    <div class="header">
      <img src="/aigentsy-logo-ultraclean.png" alt="AiGentsy" class="logo" />
      <h1>Get a <span>Free AI Business Audit</span></h1>
      <p>Discover untapped opportunities in your business &mdash; powered by AI analysis</p>
    </div>

    <!-- Audit Form Card -->
    <div class="audit-card">
      <form id="auditForm" autocomplete="on">

        <div class="form-group">
          <label for="url">Business URL or Description</label>
          <textarea
            id="url"
            name="url"
            placeholder="e.g. https://yourbusiness.com or describe what your business does..."
            required
          ></textarea>
        </div>

        <div class="form-group">
          <label for="email">Email Address</label>
          <input
            type="email"
            id="email"
            name="email"
            placeholder="you@example.com"
            required
          />
        </div>

        <div class="form-group">
          <label for="business_name">Business Name <span class="optional">(optional)</span></label>
          <input
            type="text"
            id="business_name"
            name="business_name"
            placeholder="Acme Corp"
          />
        </div>

        <button type="submit" class="submit-btn" id="submitBtn">Generate My Free Audit</button>
      </form>

      <div id="statusMsg"></div>
    </div>

    <div class="footer">
      Powered by <a href="/">AiGentsy</a>
    </div>
  </div>

  <script>
    (function () {
      const form    = document.getElementById('auditForm');
      const btn     = document.getElementById('submitBtn');
      const status  = document.getElementById('statusMsg');

      // Extract ?ref= from URL
      const params = new URLSearchParams(window.location.search);
      const ref    = params.get('ref') || '';

      form.addEventListener('submit', async function (e) {
        e.preventDefault();

        const url           = document.getElementById('url').value.trim();
        const email         = document.getElementById('email').value.trim();
        const business_name = document.getElementById('business_name').value.trim();

        if (!url || !email) {
          showStatus('Please fill in all required fields.', 'error');
          return;
        }

        btn.disabled = true;
        btn.textContent = 'Submitting...';
        status.className = 'status-msg';
        status.textContent = '';

        const payload = { url, email, business_name };
        if (ref) payload.ref = ref;

        try {
          const res = await fetch('https://aigentsy-ame-runtime.onrender.com/free-audit/generate', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
          });

          if (!res.ok) {
            const errData = await res.json().catch(() => null);
            throw new Error((errData && errData.detail) || 'Something went wrong. Please try again.');
          }

          showStatus(
            'Your free audit is being prepared! Check your email within 30 minutes.',
            'success'
          );
          form.reset();
        } catch (err) {
          showStatus(err.message || 'Network error. Please try again.', 'error');
        } finally {
          btn.disabled = false;
          btn.textContent = 'Generate My Free Audit';
        }
      });

      function showStatus(msg, type) {
        status.textContent = msg;
        status.className = 'status-msg ' + type;
      }
    })();
  </script>

</body>
</html>
