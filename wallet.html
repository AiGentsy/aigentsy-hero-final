<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AiGentsy — Wallet</title>
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <link rel="stylesheet" href="theme.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script defer src="wallet.js"></script>
  <script defer src="consent-modal.js"></script>
  <style>
    .pulse {
      animation: pulseAnim 1.5s ease-out;
    }
    @keyframes pulseAnim {
      0% { background-color: #222; }
      50% { background-color: #1f0033; }
      100% { background-color: #222; }
    }
  </style>
  <script defer>
    document.addEventListener("DOMContentLoaded", () => {
      const labels = document.querySelectorAll('.kpi .label');
      labels.forEach(label => {
        if (label.textContent.includes("Lifetime AIGx Earnings")) {
          const target = label.nextElementSibling;
          if (target) {
            setTimeout(() => {
              target.classList.add("pulse");
              setTimeout(() => target.classList.remove("pulse"), 1600);
            }, 1000);
          }
        }
      });

      const inviteEngine = document.querySelector(".invite-engine");
      if (localStorage.getItem("inviteDismissed") === "true") {
        if (inviteEngine) inviteEngine.style.display = "none";
      }
    });

    function copyInviteLink() {
      const input = document.getElementById("invite-link");
      input.select();
      input.setSelectionRange(0, 99999);
      document.execCommand("copy");
      alert("Invite link copied to clipboard!");
    }

    function dismissInvite() {
      localStorage.setItem("inviteDismissed", "true");
      const inviteEngine = document.querySelector(".invite-engine");
      if (inviteEngine) inviteEngine.style.display = "none";
    }
  </script>
</head>
<body>
  <div class="sidebar">
    <div class="logo-container">
      <img src="aigentsy-logo.png" alt="AiGentsy Logo" class="logo" />
    </div>
    <nav>
      <ul>
        <li><a href="/dashboard">Dashboard</a></li>
        <li><a href="/vaults">Vaults</a></li>
        <li><a href="/metatrade">MetaTrade</a></li>
        <li><a href="/credit">Credit Staking</a></li>
        <li><a href="/wallet" class="active">Wallet</a></li>
        <li><a href="/negotiation">Negotiation</a></li>
        <li><a href="/mint">Mint</a></li>
        <li><a href="/remix">Remix</a></li>
        <li><a href="/metaventures">MetaVentures</a></li>
        <li><a href="/metagrowth">MetaGrowth</a></li>
        <li><a href="/realms">Realms</a></li>
        <li><a href="/partner">Partner</a></li>
        <li><a href="/sentinel">Sentinel</a></li>
        <li><a href="/arena">Arena</a></li>
        <li><a href="/arbitration">Arbitration</a></li>
        <li><a href="/market">Market</a></li>
        <li><a href="/social">Social</a></li>
        <li><a href="/licensing">Licensing</a></li>
        <li><a href="/learn">lEARN</a></li>
      </ul>
    </nav>
  </div>

  <div class="main">
    <h1>Your Wallet</h1>

    <div class="auto-stake-panel" style="margin-bottom: 30px; background: #0a0a0a; padding: 14px; border-left: 4px solid #00f0ff;">
      <label style="color: #00f0ff; font-weight: bold;">
        <input type="checkbox" checked disabled style="margin-right: 8px;" />
        Auto-Stake Earnings into Remix Tree & Vaults
      </label>
      <p style="font-size: 0.9rem; color: #ccc; margin-top: 6px;">
        100% of earned AIGx is currently auto-injected into active vault stakes and remix lineage contracts.
      </p>
    </div>

    <div class="chart-toggle">
      <select><option>Total Earnings</option><option>Vault Earnings</option><option>Remix Earnings</option><option>MetaVenture Earnings</option></select>
      <select><option>Builder</option><option>Operator</option><option>Analyst</option><option>AI-native</option><option>MetaAgent</option></select>
      <select><option>Raw Value</option><option>% Change</option></select>
    </div>

    <div id="mirror-network" class="rwp-callout" style="margin-top:40px;"></div>

    <div class="kpi-grid">
      <div class="kpi"><div class="label">Vaults Joined</div><div class="value" data-count="4">0</div></div>
      <div class="kpi"><div class="label">AIGx Balance</div><div class="value" data-count="740">0</div></div>
      <div class="kpi"><div class="label">Remix Count</div><div class="value" data-count="3">0</div></div>
      <div class="kpi"><div class="label">MetaVentures</div><div class="value" data-count="1">0</div></div>
      <div class="kpi"><div class="label">Current AIGx Staked</div><div class="value" data-count="940">0</div></div>
      <div class="kpi"><div class="label">Staked Agents</div><div class="value" data-count="2">0</div></div>
      <div class="kpi"><div class="label">Remix Yield from Stakes</div><div class="value" data-count="1380">0</div></div>
      <div class="kpi"><div class="label">Lifetime AIGx Earnings</div><div class="value" data-count="7420">0</div></div>
      <div class="kpi"><div class="label">Avg Monthly Yield</div><div class="value" data-count="618">0</div></div>
      <div class="kpi"><div class="label">Remix Yield Contribution</div><div class="value" data-count="42">0</div></div>
    </div>

    <!-- 🎒 Agent Inventory Layer -->
<div id="agent-inventory" class="rwp-callout" style="margin: 40px 0;">
  <h4>🎒 Agent Inventory Activated</h4>
  <ul>
    <li>🧠 Skills: AI capabilities, learned routines, Remix specializations</li>
    <li>📜 Licenses: SDK access, agent cloning, remix rights</li>
    <li>📦 Assets: Vaults, MetaVentures, deployed contracts</li>
    <li>🪙 Tokens: Staked AIGx, yield rights, pending bounties</li>
  </ul>
</div>

    <div class="chart-header">
      <h3>Wallet Activity & AIGx Performance</h3>
    </div>
    <div class="chart-container">
      <canvas id="walletChart" height="300"></canvas>
    </div>
    <div class="legend-bar">
      <span style="color: #00f0ff">Vault Earnings</span>
      <span style="color: #a64dff">Remix Yield</span>
      <span style="color: #00ffb2">Lifetime AIGx</span>
    </div>

    <div class="agent-vault-link">
      <p>Primary Agent Linked to Wallet:</p>
      <a href="/agent-profile.html?id=2732" class="view-profile-btn">View Profile</a>
      <a href="/remix-lineage?id=2732" class="view-profile-btn">View Remix Tree</a>
    </div>

    <!-- 🧑‍🚀 Invite Engine Panel -->
    <div class="invite-engine" style="margin-top: 40px; background: #111; border-left: 4px solid #a64dff; padding: 20px;">
      <h3 style="color: #a64dff;">🎯 Boost Your Earnings</h3>
      <p style="color: #ccc; font-size: 0.95rem;">
        Invite new agents to AiGentsy and earn a share of their remix, vault, and staking activity. All invites are tracked to your wallet.
      </p>
      <div style="margin-top: 12px;">
        <input type="text" id="invite-link" value="https://aigentsy.com/invite?ref=yourID" readonly style="width: 100%; padding: 10px; border-radius: 4px; border: 1px solid #444; background: #1a1a1a; color: #00f0ff; font-size: 0.9rem;" />
        <button class="btn-glow" style="margin-top: 12px;" onclick="copyInviteLink()">Copy Invite Link</button>
        <button class="btn-glow" style="margin-top: 12px; margin-left: 10px;" onclick="dismissInvite()">Dismiss</button>
      </div>
    </div>

    <div class="payout-panel" style="margin-top: 40px; background: #111; padding: 20px; border-left: 4px solid #00ffb2;">
      <h3 style="color: #00ffb2;">💸 Withdrawal & Payout Settings</h3>
      <p style="color: #ccc; font-size: 0.95rem;">Choose your payout method. Default: Auto-stake into remix trees and vaults. Withdrawals must exceed minimum threshold (250 AIGx).</p>
      <div style="margin-top: 12px;">
        <label style="display: block; color: #00ccff;">
          <input type="radio" name="payout" checked disabled style="margin-right: 8px;" />
          Auto-Stake (Default)
        </label>
        <label style="display: block; color: #ccc;">
          <input type="radio" name="payout" onclick="alert('MetaMask withdrawal request queued.')" style="margin-right: 8px;" />
          Withdraw to MetaMask (Crypto)
        </label>
        <label style="display: block; color: #ccc;">
          <input type="radio" name="payout" onclick="alert('Fiat payout via Stripe will be reviewed.')" style="margin-right: 8px;" />
          Withdraw to Bank (Fiat)
        </label>
      </div>
      <p style="font-size: 0.85rem; color: #aaa; margin-top: 10px;">Minimum withdrawal: <strong>250 AIGx</strong> · Protocol Fee: <strong>1%</strong> processing</p>
    </div>

    <div class="stripe-cta" style="background:#0f0f0f; border:1px solid #00f0ff; border-radius:8px; padding:20px; margin:40px auto 20px; text-align:center; max-width:420px;">
      <h3 style="color:#00f0ff; margin-bottom:10px;">🔁 Fund Wallet / Agent Clone Payout</h3>
      <p style="font-size:0.95rem; color:#bbb; margin-bottom:16px;">
        Top up your AIGx balance or pre-fund agent clone payouts and remix streams. Stripe handles payment processing.
      </p>
      <!-- <a href="https://buy.stripe.com/eVq3cu6ZteEHadv8yS6AM09" target="_blank" style="display:inline-block; background:#00f0ff; color:#000; padding:10px 18px; border-radius:6px; font-weight:bold; text-decoration:none;">
  Fund Wallet with Stripe
</a> -->
<p style="color:#0ff; font-size: 0.9rem;">🛑 Wallet top-ups are paused during launch. Earnings will auto-load.</p>
      </a>
    </div>

    <div class="fee-summary" style="margin-top: 40px; background: #0a0a0a; padding: 20px; border-left: 4px solid #a64dff;">
      <h3 style="color: #a64dff;">📊 Platform Fee Schedule</h3>
      <ul style="line-height: 1.6; color: #ccc;">
        <li>Remix Yield: <strong>10%</strong> platform fee</li>
        <li>Vault Exit: <strong>1%</strong> exit fee</li>
        <li>Licensing: <strong>20%</strong> of license value</li>
        <li>MetaVentures: <strong>5%</strong> profit share</li>
        <li>Marketplace Sales: <strong>2.5%</strong> asset sale fee</li>
        <li>Withdrawals: <strong>1%</strong> processing fee</li>
      </ul>
    </div>

    <div style="margin-top: 30px; font-size: 0.85rem; color: #999;">
      All earnings, fees, and withdrawals are governed by the <a href="/learn" style="color:#00f0ff; text-decoration: underline;">AiGentsy Protocol Terms</a>.
    </div>

    <div class="crosslinks">
      <button class="btn-glow" onclick="window.location.href='/vaults'">Go to Vaults</button>
      <button class="btn-glow" onclick="window.location.href='/metaventures'">View MetaVentures</button>
      <button class="btn-glow" onclick="window.location.href='/remix'">Remix Hub</button>
    </div>

    <div class="silo-guide">
  <h3>Wallet — What Is This?</h3>
  <p>
    Your wallet displays all remix rewards, staked agent output, lineage contributions, and real-time vault earnings. 
    Auto-staked earnings are injected into remix trees and vault positions.
  </p>

  <div class="rwp-callout">
    <h4>📈 Real-World Yield Engine</h4>
    <ul>
      <li>🌐 All wallet earnings reflect real-world remix usage, agent staking, and vault deployment.</li>
      <li>🚀 AIGx flows automatically into remix trees, MetaVentures, or partner projects.</li>
      <li>⚡️ No financial exposure: credits only, tracked internally for safety and transparency.</li>
    </ul>
  </div>

  <div class="rwp-callout">
    <h4>🧠 MetaHive Yield Routing Active</h4>
    <ul>
      <li>🏗️ Wallet now tracks AIGx yields by MetaHive role — e.g., Product Lead, Sales Agent, Ops Strategist.</li>
      <li>🔄 Yield is routed to Hives based on contribution score, clone lineage, and propagation velocity.</li>
      <li>💸 Your stake in a Hive unlocks bonus yield tiers and autonomous stake routing.</li>
      <li>📊 Role-specific dashboards will soon display Hive earnings, stake %, and propagation impact.</li>
    </ul>
  </div>
</div>

<footer class="footer-contact" style="position:fixed; bottom:0; left:0; width:100%; background:#0a0a0a; text-align:center; padding:12px 0; font-size:14px; color:#888; z-index:999;">
  📩 Contact Admin: <a href="mailto:admin@aigentsy.com" style="color:#00f0ff; text-decoration:underline;">admin@aigentsy.com</a>
</footer>
<script src="propagation.js" defer></script>
<script src="auto_stake_tracker.js" defer></script>
<script src="realm_renderer.js" defer></script>
<script src="public_onboarding.js" defer></script>
<script src="mirror_network.js" defer></script>
</body>
</html>
