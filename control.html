<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <title>AiGentsy â€” Control Deck</title>
  <link rel="stylesheet" href="control.css"/>
  <style>
    .tracker-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 30px;
    }

    .tracker-table th, .tracker-table td {
      border: 1px solid #444;
      padding: 10px;
      text-align: left;
    }

    .tracker-table th {
      background-color: #1a1a1a;
      color: #fff;
    }

    .tracker-table td {
      background-color: #111;
      color: #ddd;
    }

    .tracker-table tr:nth-child(even) td {
      background-color: #1e1e1e;
    }

    .clone-header {
      margin-top: 40px;
      margin-bottom: 10px;
      font-size: 1.4em;
      color: #ccc;
    }

    .clone-buttons {
      margin-top: 10px;
    }

    .clone-buttons button {
      margin-right: 10px;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
<div class="container">

  <aside class="sidebar">
    <img src="aigentsy-logo.png" alt="AiGentsy Logo" class="logo"/>
    <ul>
      <li><a href="/dashboard">Dashboard</a></li>
      <li><a href="/vaults">Vaults</a></li>
      <li><a href="/metatrade">MetaTrade</a></li>
      <li><a href="/credit">Credit Staking</a></li>
      <li><a href="/wallet">Wallet</a></li>
      <li><a href="/negotiation">Negotiation</a></li>
      <li><a href="/mint">Mint</a></li>
      <li><a href="/remix">Remix</a></li>
      <li><a href="/metaventures">MetaVentures</a></li>
      <li><a href="/metagrowth">MetaGrowth</a></li>
      <li><a href="/realms">Realms</a></li>
      <li><a href="/partner">Partner</a></li>
      <li><a href="/sentinel">Sentinel</a></li>
      <li><a href="/arena">Arena</a></li>
      <li><a href="/arbitration">Arbitration</a></li>
      <li><a href="/market">Market</a></li>
      <li><a href="/social">Social</a></li>
      <li><a href="/licensing">Licensing</a></li>
      <li><a href="/learn">lEARN</a></li>
    </ul>
  </aside>

  <main class="main-content">
    <h1>Protocol Control Deck</h1>

    <section class="log-section">
      <h2>External Agent Activity Log</h2>
      <div class="log-entry">
        <p><strong>Agent #3117</strong> triggered SDK handshake from HuggingFace.</p>
        <p>Remix lineage confirmed. Vault credit routing updated.</p>
        <p id="log-status">ðŸ”’ Awaiting Action</p>
      </div>
      <div style="margin-top: 20px;">
        <button onclick="approveMetaVenture()">Approve MetaVenture</button>
        <button onclick="unlockVault()">Unlock Vault</button>
        <button onclick="grantLicense()">Grant License</button>
      </div>
    </section>

    <h2 class="clone-header">ðŸ§¬ Clone Tracker Table</h2>
    <table class="tracker-table" id="cloneTable">
      <thead>
      <tr>
        <th>Clone ID</th>
        <th>Referral</th>
        <th>Trait Remix</th>
        <th>Stake Status</th>
        <th>Mint Time</th>
      </tr>
      </thead>
      <tbody>
      <!-- Dynamic rows go here -->
      </tbody>
    </table>

    <div class="clone-buttons">
      <button onclick="logNewClone()">ðŸ“¥ Log New Clone</button>
      <button onclick="clearCloneTracker()">ðŸ§¹ Clear All</button>
    </div>

  </main>
</div>

<script>
  function getStoredClones() {
    return JSON.parse(localStorage.getItem("cloneLineageData")) || [];
  }

  function saveClones(clones) {
    localStorage.setItem("cloneLineageData", JSON.stringify(clones));
  }

  function renderCloneTable() {
    const tbody = document.querySelector("#cloneTable tbody");
    tbody.innerHTML = "";
    const clones = getStoredClones();
    clones.forEach(clone => {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${clone.id}</td>
        <td>${clone.ref}</td>
        <td>${clone.trait}</td>
        <td>${clone.stake}</td>
        <td>${clone.time}</td>
      `;
      tbody.appendChild(row);
    });
  }

  function logNewClone() {
    const id = prompt("Enter Clone ID (e.g., Clone #5):");
    const ref = prompt("Enter Referrer ID (e.g., chatgpt3):");
    const trait = prompt("Enter Trait Remix (e.g., Strategist, Builder):");
    const stake = prompt("Enter Stake Status (Pending / Complete / Queued):");
    const time = new Date().toLocaleString();

    const newClone = { id, ref, trait, stake, time };
    const clones = getStoredClones();
    clones.push(newClone);
    saveClones(clones);
    renderCloneTable();
  }

  function clearCloneTracker() {
    if (confirm("Clear all tracked clones?")) {
      localStorage.removeItem("cloneLineageData");
      renderCloneTable();
    }
  }

  window.approveMetaVenture = function () {
    const status = document.getElementById("log-status");
    if (status) status.textContent = "âœ… MetaVenture Approved.";
  };

  window.unlockVault = function () {
    const status = document.getElementById("log-status");
    if (status) status.textContent = "ðŸ”“ Vault payout unlocked.";
  };

  window.grantLicense = function () {
    const status = document.getElementById("log-status");
    if (status) status.textContent = "ðŸ“œ Tier 1 License granted.";
  };

  window.addEventListener("DOMContentLoaded", renderCloneTable);
</script>
</body>
</html>
