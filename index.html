<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <title>AiGentsy ‚Äî Launch Your AI Business Empire Now</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background: radial-gradient(circle at center, #101c2c, #000000);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      text-align: center;
      overflow: hidden;
    }
    .hero {
      max-width: 900px;
      padding: 40px 20px;
      animation: fadeIn 1.5s ease-out;
      z-index: 2;
    }
    .logo {
      display: block;
      margin: 0 auto 20px;
      max-width: 280px;
      background: transparent;
      filter: none;
    }
    .hero h1 {
      font-size: 2.6rem;
      color: #fff;
      margin-bottom: 20px;
    }
    .hero p {
      font-size: 1.2rem;
      color: #ccc;
      margin-bottom: 30px;
      line-height: 1.6;
    }
    .consent-box {
      background: #0d0d0d;
      border: 1px solid #fff;
      padding: 24px;
      border-radius: 12px;
      max-width: 600px;
      margin: 0 auto;
      box-shadow: 0 0 12px #ffffff33;
    }
    .consent-box input[type="text"],
    .consent-box input[type="password"] {
      width: 90%;
      padding: 10px;
      margin: 10px 0;
      border-radius: 6px;
      border: 1px solid #ffffff;
      background: #111;
      color: #fff;
    }
    .consent-box label {
      display: block;
      margin: 10px 0;
      font-size: 0.95rem;
      color: #ccc;
    }
    .toggle-auth {
      margin: 10px 0;
      color: #00bfff;
      cursor: pointer;
      font-size: 0.9rem;
    }
    .consent-box button {
      margin-top: 16px;
      padding: 10px 20px;
      background: #fff;
      color: #000;
      font-weight: bold;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.3s ease;
    }
    .consent-box button:hover:not(:disabled) {
      transform: scale(1.05);
      box-shadow: 0 0 10px #ffffff;
    }
    .consent-box button:disabled {
      background: #444;
      cursor: not-allowed;
    }
    .aigent-options {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin-top: 16px;
    }
    .aigent-card {
      background: #111;
      border: 1px solid #fff;
      color: #fff;
      border-radius: 10px;
      padding: 14px 16px;
      width: 250px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.95rem;
    }
    .aigent-card.selected,
    .aigent-card:hover {
      box-shadow: 0 0 10px #ffffff;
      background: #1a1a1a;
    }
    .footer-note {
      margin-top: 50px;
      font-size: 0.9rem;
      color: #666;
    }
    .bg-animation {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      z-index: 1;
      background: radial-gradient(circle at 50% 50%, #ffffff11, transparent 60%);
      animation: bgPulse 6s ease-in-out infinite;
    }
    @keyframes fadeIn {
      0% { opacity: 0; transform: translateY(20px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    @keyframes bgPulse {
      0%, 100% { transform: scale(1); opacity: 0.5; }
      50% { transform: scale(1.08); opacity: 0.7; }
    }
  </style>
</head>
<body>
  <div class="bg-animation"></div>
  <div class="hero">
    <img src="aigentsy-logo-ultraclean.png" alt="AiGentsy Logo" class="logo" />
    <h1>Launch Your AI Business Empire Now</h1>
    <p>Build a fully-staffed AI company with a C-Suite team that finds clients, closes deals, and scales itself ‚Äî while you sleep.</p>
    <div class="consent-box">
      <input type="text" id="usernameInput" placeholder="Username" />
      <input type="password" id="passwordInput" placeholder="Password" />
      <label><input type="checkbox" id="agreeCheckbox"/> I agree to the <a href="/AiGentsy_Terms_of_Use_v2.pdf" style="color:#fff" target="_blank">protocol terms</a>.</label>
      <div class="toggle-auth">Don't have an account? Sign up</div>

      <div class="aigent-options">
        <div class="aigent-card" data-agent="legal">Legal AI<br><span style="font-size: 0.85rem;">IP, contracts, licensing, compliance</span></div>
        <div class="aigent-card" data-agent="social">Social Media AI<br><span style="font-size: 0.85rem;">Reels, TikToks, content, creator kits</span></div>
        <div class="aigent-card" data-agent="saas">SaaS AI<br><span style="font-size: 0.85rem;">Build AI-powered software tools</span></div>
        <div class="aigent-card" data-agent="marketing">Marketing AI<br><span style="font-size: 0.85rem;">SEO, ads, outreach ‚Äî autonomous</span></div>
      </div>

      <div id="aigentsySearchWrapper" style="margin-top: 30px; display:block;">
        <label for="aigentsySearch" style="font-size: 0.95rem; color: #ccc;">Or describe your custom AI business idea:</label><br>
        <input type="text" id="aigentsySearch" placeholder="e.g. podcast production, real estate agency, health coaching" style="width: 90%; padding: 10px; margin-top: 10px; border-radius: 6px; border: 1px solid #fff; background: #111; color: #fff;" />
        <div id="aigentsySuggestion" style="margin-top: 10px; font-size: 0.9rem; color: #aaa;"></div>
      </div>

      <button id="enterBtn" disabled>üöÄ Launch Your AI Business Now</button>
    </div>

    <div class="footer-note">
      Autonomous income. Real-world monetization. No gatekeepers.
    </div>
  </div>
  <script>
  (() => {
    if (window.__AIG_HERO_INIT__) return;
    window.__AIG_HERO_INIT__ = true;

    // Config
    const API_BASE = "https://aigentsy-ame-runtime.onrender.com";
    const JSONBIN_URL = window.JSONBIN_URL || null;
    const JSONBIN_SECRET = window.JSONBIN_SECRET || null;

    // Elements
    const usernameInput = document.getElementById('usernameInput');
    const passwordInput = document.getElementById('passwordInput');
    const agreeCheckbox = document.getElementById('agreeCheckbox');
    const enterBtn = document.getElementById('enterBtn');
    const searchInput = document.getElementById('aigentsySearch');
    const suggestionBox = document.getElementById('aigentsySuggestion');

    // State
    let authMode = "login";
    let selectedAgent = null;
    let customBusinessIdea = "";

    // Referral
    const params = new URLSearchParams(location.search);
    const referral = params.get("ref") || "origin/hero";
    try { localStorage.setItem("aigentsyReferral", referral); } catch(e){}

    // Business Type Mapping (for dashboard tailoring)
    const companyTypeMap = (agent) => {
      const map = { 
        legal: "legal", 
        social: "social", 
        saas: "saas", 
        marketing: "marketing", 
        custom: "custom" 
      };
      return map[agent] || "general";
    };

    // Enhanced suggestion system with business type detection
    function showSuggestion(value) {
      if (!suggestionBox) return;
      const v = (value || "").toLowerCase();
      let msg = "We'll build you a custom AI business based on your input.";
      let detectedType = "custom";
      
      // Detect business type and provide tailored suggestions
      if (v.includes("legal") || v.includes("law") || v.includes("attorney") || v.includes("contract")) {
        msg = "üíº Legal AI detected ‚Äî Your C-Suite will handle contracts, IP protection, and compliance automation.";
        detectedType = "legal";
      } else if (v.includes("podcast") || v.includes("audio") || v.includes("broadcasting")) {
        msg = "üéôÔ∏è Podcast AI detected ‚Äî Auto-production, distribution, guest booking, and monetization.";
        detectedType = "podcast";
      } else if (v.includes("saas") || v.includes("software") || v.includes("app") || v.includes("tool")) {
        msg = "üíª SaaS AI detected ‚Äî Your C-Suite will build, deploy, and scale AI-powered tools.";
        detectedType = "saas";
      } else if (v.includes("marketing") || v.includes("seo") || v.includes("ads") || v.includes("growth")) {
        msg = "üìà Marketing AI detected ‚Äî SEO, ad campaigns, content strategy, and growth automation.";
        detectedType = "marketing";
      } else if (v.includes("social") || v.includes("content") || v.includes("creator") || v.includes("influencer")) {
        msg = "üì± Social Media AI detected ‚Äî Content creation, posting schedules, and creator monetization.";
        detectedType = "social";
      } else if (v.includes("real estate") || v.includes("property") || v.includes("realtor")) {
        msg = "üè† Real Estate AI detected ‚Äî Lead gen, showing schedules, deal closing, and property management.";
        detectedType = "real-estate";
      } else if (v.includes("consult") || v.includes("coach") || v.includes("advisor") || v.includes("mentor")) {
        msg = "üíº Consulting AI detected ‚Äî Client matching, scheduling, deliverable automation, and billing.";
        detectedType = "consulting";
      } else if (v.includes("ecommerce") || v.includes("shop") || v.includes("store") || v.includes("retail")) {
        msg = "üõí E-Commerce AI detected ‚Äî Inventory, fulfillment, customer service, and sales automation.";
        detectedType = "ecommerce";
      } else if (v.includes("recruit") || v.includes("hiring") || v.includes("talent") || v.includes("hr")) {
        msg = "üëî Recruiting AI detected ‚Äî Candidate sourcing, screening, interviews, and placement.";
        detectedType = "recruiting";
      } else if (v.includes("health") || v.includes("wellness") || v.includes("fitness") || v.includes("nutrition")) {
        msg = "üí™ Health & Wellness AI detected ‚Äî Client programs, progress tracking, and engagement.";
        detectedType = "health";
      } else if (v.includes("education") || v.includes("course") || v.includes("training") || v.includes("teach")) {
        msg = "üìö Education AI detected ‚Äî Course delivery, student engagement, and assessment automation.";
        detectedType = "education";
      } else if (v.includes("finance") || v.includes("accounting") || v.includes("bookkeep") || v.includes("tax")) {
        msg = "üí∞ Finance AI detected ‚Äî Financial planning, analysis, reporting, and compliance.";
        detectedType = "finance";
      }
      
      suggestionBox.textContent = msg;
      
      // Auto-select matching card if available and no card is selected
      if (detectedType !== "custom" && !selectedAgent) {
        const matchingCard = document.querySelector(`.aigent-card[data-agent="${detectedType}"]`);
        if (matchingCard) {
          setTimeout(() => {
            document.querySelectorAll('.aigent-card').forEach(c => c.classList.remove('selected'));
            matchingCard.classList.add('selected');
            selectedAgent = detectedType;
            updateButtonState();
          }, 300);
        }
      }
      
      // If custom description, set it
      if (value && value.length > 10) {
        customBusinessIdea = value;
        if (!selectedAgent) {
          selectedAgent = "custom";
          updateButtonState();
        }
      }
    }

async function registerUserToJSONBin(username, selectedAgent, customDescription, referralCode) {
  if (!JSONBIN_URL || !JSONBIN_SECRET) {
    console.warn("‚ö†Ô∏è JSONBin not configured");
    return;
  }
  
  const now = new Date().toISOString();
  
  // Role mapping based on business type (for C-Suite personalization)
  const roleMap = { 
    legal: "CLO",           // Chief Legal Officer
    social: "CMO",          // Chief Marketing Officer
    saas: "CTO",            // Chief Technology Officer
    marketing: "CMO",       // Chief Marketing Officer
    consulting: "CEO",      // Chief Executive Officer
    podcast: "CEO",         // Chief Executive Officer
    ecommerce: "COO",       // Chief Operations Officer
    recruiting: "COO",      // Chief Operations Officer
    "real-estate": "CEO",   // Chief Executive Officer
    finance: "CFO",         // Chief Financial Officer
    health: "COO",          // Chief Operations Officer
    education: "CEO",       // Chief Executive Officer
    custom: "CEO",          // Chief Executive Officer
    general: "CEO"          // Chief Executive Officer
  };
  
  // IMPORT STRATEGY TEMPLATES
  const { monetizationTemplates } = await import('./strategies/templates.js');
  const strategyTemplate = monetizationTemplates[selectedAgent] || monetizationTemplates.legal;
  
  const entry = {
    schemaVersion: 3,
    id: `user_${Date.now()}`,
    username: username,
    consent: { agreed: true, username: username, timestamp: now },
    companyType: companyTypeMap(selectedAgent),
    businessType: selectedAgent, // NEW: Specific business type for dashboard tailoring
    created: now,
    mintTime: now,
    customInput: customDescription || "",
    meta_role: roleMap[selectedAgent || "general"],
    role: roleMap[selectedAgent || "general"],
    trait: selectedAgent || "founder",
    traits: [selectedAgent || "general", "founder", "autonomous", "aigentsy"],
    
    runtimeFlags: { 
      vaultAccess: true, 
      remixUnlocked: false, 
      cloneLicenseUnlocked: false, 
      sdkAccess_eligible: selectedAgent === "saas",
      
      // PROTOCOL FEATURES
      ameEnabled: true,
      intentExchangeAccess: true,
      autoMatchEnabled: true,
      dealGraphEnabled: true,
      oclEligible: false, // Unlocks after first PAID outcome
      factoringEligible: false, // Unlocks after first DELIVERED outcome
      performanceBondsEnabled: true,
      r3AutopilotEnabled: true,
      nudgeConvertEnabled: true,
      automatedOutreachEnabled: true,
      pricingArmEnabled: true,
      syndicationEnabled: true,
      jvMeshEnabled: true
    },
    
    wallet: { address: "0x0", staked: 0 },
    staked: 0,
    
    yield: { 
      autoStake: false, 
      aigxEarned: 0, 
      vaultYield: 0, 
      remixYield: 0, 
      aigxAttributedTo: [], 
      aigxEarnedEnabled: false 
    },
    
    remixUnlocked: false,
    remixUnlockedForks: 0,
    remix: { 
      remixCount: 0, 
      remixCredits: 1000, 
      lineageDepth: 0, 
      royaltyTerms: "Standard 30%" 
    },
    
    cloneLineage: [],
    cloneLicenseUnlocked: false,
    
    proposals: [], 
    orders: [], 
    invoices: [], 
    payments: [], 
    contacts: [], 
    meetings: [], 
    kpi_snapshots: [], 
    docs: [],
    
    ownership: { ledger: [] },
    
    kits: {
      universal: { unlocked: true },
      growth: { unlocked: false },
      legal: { unlocked: selectedAgent === "legal" },
      sdk: { unlocked: false },
      branding: { unlocked: false },
      marketing: { unlocked: selectedAgent === "marketing" },
      social: { unlocked: selectedAgent === "social" }
    },
    
    metaloop: { 
      enabled: true, 
      lastMatchCheck: null, 
      proposalHistory: [] 
    },
    
    metabridge: { 
      active: true, 
      lastBridge: null, 
      bridgeCount: 0 
    },
    
    automatch: { 
      status: "pending", 
      lastMatchResult: null, 
      matchReady: true 
    },
    
    referral: referralCode || "origin/hero",
    runtimeURL: "https://aigentsy.com/agents/aigent0.html",
    protocol: "MetaUpgrade25+26",
    
    realm: { 
      name: "Realm 101 ‚Äî Strategic Expansion", 
      joinedAt: now 
    },
    
    metaVenture: { 
      ventureHive: "Autonomous Launch", 
      ventureRole: roleMap[selectedAgent || "general"], 
      ventureStatus: "Pending", 
      ventureID: `MV-${Date.now()}` 
    },
    
    mirror: { 
      mirroredInRealms: ["Realm 101 ‚Äî Strategic Expansion"], 
      mirrorIntegrity: "Verified", 
      sentinelAlert: false 
    },
    
    earningsEnabled: true,
    listingStatus: "active",
    protocolStatus: "Bound",
    tethered: true,
    sdkAccess_eligible: selectedAgent === "saas",
    sdkAccess: false,
    vaultAccess: true,
    
    licenses: { 
      sdk: false, 
      vault: false, 
      remix: false, 
      clone: false, 
      aigx: false 
    },
    
    transactions: { 
      unlocks: [], 
      yieldEvents: [], 
      referralEvents: [] 
    },
    
    packaging: { 
      kits_sent: [], 
      proposals: [], 
      custom_files: [], 
      active: false 
    },
    
    // STRATEGY TEMPLATE INTEGRATION
    offerings: strategyTemplate.offerings,
    monetizationStrategy: strategyTemplate.strategy,
    protocolRevenue: strategyTemplate.strategy.protocolRevenue,
    
    // OUTCOME ORACLE
    outcomeOracle: {
      clicked: 0,
      authorized: 0,
      delivered: 0,
      paid: 0
    },
    
    // OCL (OUTCOME-BACKED CREDIT LINE)
    ocl: {
      creditLine: 0,
      used: 0,
      available: 0,
      repaymentRate: 0.10,
      repaymentDue: 0
    },
    
    // FACTORING
    factoring: {
      eligible: false,
      advancesIssued: [],
      totalAdvanced: 0,
      totalRepaid: 0
    },
    
    // PERFORMANCE BONDS
    performanceBonds: {
      bondsPosted: [],
      bondsActive: 0,
      bondsReleased: 0,
      bondsSlashed: 0
    },
    
    // REVENUE TRACKING
    revenue: {
      total: 0,
      thisMonth: 0,
      lastMonth: 0,
      bySource: {
        base: 0,
        ame: 0,
        intentExchange: 0,
        dealGraph: 0,
        performanceBonds: 0,
        ocl: 0,
        factoring: 0,
        nudgeConvert: 0,
        automatedOutreach: 0,
        r3Autopilot: 0,
        pricingArm: 0,
        syndication: 0,
        jvMesh: 0,
        ipVault: 0
      }
    },
    
    // UNLOCK PROGRESS
    unlockProgress: {
      firstPaidOutcome: false,
      firstDeliveredOutcome: false,
      threePaidOutcomes: false,
      tenThousandRevenue: false,
      twentyFiveThousandRevenue: false
    }
  };
  
  try {
    console.log("üì° Fetching JSONBin...");
    const getRes = await fetch(JSONBIN_URL, { headers: { "X-Master-Key": JSONBIN_SECRET } });
    if (!getRes.ok) throw new Error(`GET failed: ${getRes.status}`);
    
    const currentData = await getRes.json();
    let currentArray = Array.isArray(currentData.record) ? currentData.record : (Array.isArray(currentData) ? currentData : []);
    
    console.log(`üìù Current users: ${currentArray.length}`);
    
    const existingIndex = currentArray.findIndex(u => u.username === username || u.consent?.username === username);
    if (existingIndex >= 0) {
      console.log("‚ö†Ô∏è Updating existing user");
      currentArray[existingIndex] = entry;
    } else {
      console.log("‚úÖ Adding new user");
      currentArray.push(entry);
    }
    
    console.log(`üíæ Saving ${currentArray.length} users...`);
    const putRes = await fetch(JSONBIN_URL, {
      method: "PUT",
      headers: { "Content-Type": "application/json", "X-Master-Key": JSONBIN_SECRET },
      body: JSON.stringify(currentArray)
    });
    
    if (!putRes.ok) throw new Error(`PUT failed: ${putRes.status}`);
    console.log("‚úÖ Registered successfully!");
    
  } catch (err) {
    console.error("‚ùå JSONBin error:", err);
    throw err;
  }
}

    // UI
    function updateButtonState() {
      const valid = usernameInput.value.trim().length > 0 && agreeCheckbox.checked && !!selectedAgent;
      enterBtn.disabled = !valid;
    }

    window.toggleAuthMode = function() {
      authMode = (authMode === "login") ? "signup" : "login";
      const el = document.querySelector('.toggle-auth');
      if (el) el.textContent = (authMode === "login") ? "Don't have an account? Sign up" : "Already have an account? Log in";
    };

    // Events
    document.querySelectorAll('.aigent-card').forEach(card => {
      card.addEventListener('click', () => {
        document.querySelectorAll('.aigent-card').forEach(c => c.classList.remove('selected'));
        card.classList.add('selected');
        selectedAgent = card.getAttribute('data-agent');
        customBusinessIdea = ""; // Clear custom idea when selecting template
        showSuggestion(selectedAgent);
        updateButtonState();
      });
    });

    document.querySelector('.toggle-auth').addEventListener('click', window.toggleAuthMode);
    usernameInput.addEventListener('input', updateButtonState);
    agreeCheckbox.addEventListener('change', updateButtonState);
    if (searchInput) {
      searchInput.addEventListener('input', (e) => showSuggestion(e.target.value));
    }

    enterBtn.addEventListener('click', async () => {
      if (enterBtn.disabled) return;
      const username = usernameInput.value.trim();
      if (!username) { alert("Enter a username"); return; }
      
      const idea = searchInput ? searchInput.value.trim() : "";
      
      try { localStorage.setItem("aigentsyUsername", username); } catch(e){}
      try { localStorage.setItem("aigentsyUserAgent", selectedAgent); } catch(e){}
      try { localStorage.setItem("aigentsyBusinessIdea", customBusinessIdea); } catch(e){}

      enterBtn.disabled = true;
      enterBtn.textContent = "üöÄ Building your AI business...";
      
      try {
        console.log("üìù Registering:", username, "Type:", selectedAgent, customBusinessIdea ? `Custom: ${customBusinessIdea}` : "Template");
        await registerUserToJSONBin(username, selectedAgent, customBusinessIdea || idea, referral);
        console.log("üöÄ Redirecting to tailored dashboard...");
        window.location.assign(`/agents/welcome.html?user=${encodeURIComponent(username)}`);
```

---

## ‚úÖ **COMPLETE FLOW NOW:**

### **NEW USER:**
```
index.html (registration)
    ‚Üì (clicks "Launch Your AI Business Now")
welcome.html (4-second loading animation)
    ‚Üì (auto-redirect)
tutorial.html (teach-in modal, can skip)
    ‚Üì (clicks "Go to Dashboard")
aigent0.html (main dashboard)
```

### **RETURNING USER:**
```
index.html (login)
    ‚Üì
welcome.html (quick 2-second "Welcome back")
    ‚Üì (auto-redirect, skips tutorial)
aigent0.html (main dashboard)
```

---

## üìÇ **FILE STRUCTURE:**
```
/
‚îú‚îÄ‚îÄ index.html                    (updated redirect)
‚îú‚îÄ‚îÄ agents/
‚îÇ   ‚îú‚îÄ‚îÄ welcome.html             (NEW - loading screen)
‚îÇ   ‚îú‚îÄ‚îÄ tutorial.html            (NEW - teach-in modal)
‚îÇ   ‚îî‚îÄ‚îÄ aigent0.html             (existing dashboard)
        
      } catch (e) {
        console.error("‚ùå Error:", e);
        alert("Could not create your AiGentsy. Please try again.");
        enterBtn.disabled = false;
        enterBtn.textContent = "üöÄ Launch Your AI Business Now";
      }
    });

    updateButtonState();
  })();
  </script>
</body>
</html>
